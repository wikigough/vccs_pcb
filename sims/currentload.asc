Version 4
SHEET 1 3956 1300
WIRE 3008 -112 2944 -112
WIRE 3136 -112 3088 -112
WIRE 3136 -64 3136 -112
WIRE 2944 16 2944 -112
WIRE 3136 48 3136 16
WIRE 2944 80 2944 16
WIRE 2512 144 2496 144
WIRE 2592 144 2576 144
WIRE 2688 192 2688 176
WIRE 1888 224 1856 224
WIRE 1952 224 1888 224
WIRE 2096 224 2032 224
WIRE 2176 224 2096 224
WIRE 2336 224 2256 224
WIRE 2480 240 2400 240
WIRE 2496 240 2496 144
WIRE 2496 240 2480 240
WIRE 2512 240 2496 240
WIRE 2592 240 2592 144
WIRE 2624 240 2592 240
WIRE 2944 240 2944 160
WIRE 1856 256 1856 224
WIRE 2096 256 2096 224
WIRE 2336 256 2272 256
WIRE 2480 272 2480 240
WIRE 2880 288 2688 288
WIRE 2096 352 2096 320
WIRE 2944 384 2944 336
WIRE 2944 384 2816 384
WIRE 3184 384 2944 384
WIRE 3360 384 3184 384
WIRE 3536 384 3360 384
WIRE 3712 384 3536 384
WIRE 3888 384 3712 384
WIRE 2816 400 2816 384
WIRE 2816 400 2800 400
WIRE 2272 416 2272 256
WIRE 2480 416 2480 336
WIRE 2480 416 2272 416
WIRE 2560 416 2480 416
WIRE 2656 416 2640 416
WIRE 2736 416 2656 416
WIRE 3184 416 3184 384
WIRE 3360 416 3360 384
WIRE 3536 416 3536 384
WIRE 3712 416 3712 384
WIRE 3888 416 3888 384
WIRE 2848 432 2800 432
WIRE 2848 448 2848 432
WIRE 2848 448 2832 448
WIRE 2896 448 2848 448
WIRE 2656 560 2656 416
WIRE 2896 560 2896 448
WIRE 2896 560 2656 560
WIRE 3184 560 3184 512
WIRE 3360 560 3360 512
WIRE 3536 560 3536 512
WIRE 3712 560 3712 512
WIRE 3888 560 3888 512
WIRE 3184 720 3184 640
WIRE 3360 720 3360 640
WIRE 3536 720 3536 640
WIRE 3712 720 3712 640
WIRE 3888 720 3888 640
FLAG 2176 -80 +V
FLAG 2288 -80 -V
FLAG 2288 0 0
FLAG 2176 0 0
FLAG 2368 272 +V
FLAG 2368 208 -V
FLAG 3136 48 0
FLAG 1856 336 0
FLAG 2768 384 -V
FLAG 2768 448 +V
FLAG 2688 96 +V
FLAG 3360 720 0
FLAG 3536 720 0
FLAG 3712 720 0
FLAG 3312 496 HIGHC
FLAG 3664 496 LOWC
FLAG 3488 496 MEDC
FLAG 2416 1152 0
FLAG 2512 1040 0
FLAG 2624 960 0
FLAG 2416 1072 HIGHC
FLAG 2512 960 MEDC
FLAG 2624 880 LOWC
FLAG 3888 720 0
FLAG 3840 496 VLOWC
FLAG 2720 880 0
FLAG 2720 800 VLOWC
FLAG 2096 352 0
FLAG 2944 16 VTEST
FLAG 1888 224 VIN
FLAG 3184 720 0
FLAG 3136 496 VHIGHC
FLAG 2336 1280 0
FLAG 2336 1200 VHIGHC
SYMBOL voltage 2176 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {vcc}
SYMBOL voltage 2288 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {vss}
SYMBOL res 2608 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL voltage 3136 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 10
SYMBOL cap 2576 128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 10n
SYMBOL voltage 1856 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -380 98 Left 2
SYMATTR InstName V8
SYMATTR Value PULSE(0 2 1n 1n 1n 60u 120u)
SYMBOL cap 2464 272 R0
SYMATTR InstName C4
SYMATTR Value 470p
SYMBOL res 2272 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL npn 2880 240 R0
SYMATTR InstName Q3
SYMATTR Value 2SCR583D3
SYMBOL res 2656 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL npn 2624 192 R0
SYMATTR InstName Q4
SYMATTR Value 2SCR512P
SYMBOL res 2672 80 R0
WINDOW 3 36 68 Left 2
SYMATTR InstName R10
SYMATTR Value 100
SYMBOL Opamps\\OP27 2368 304 M180
SYMATTR InstName U1
SYMBOL Opamps\\OP27 2768 480 R180
SYMATTR InstName U2
SYMBOL res 3344 544 R0
SYMATTR InstName R2
SYMATTR Value 2
SYMBOL nmos 3312 416 R0
WINDOW 3 -91 105 Left 2
SYMATTR Value Si2318CDS
SYMATTR InstName M1
SYMBOL res 3520 544 R0
SYMATTR InstName R11
SYMATTR Value 20
SYMBOL res 3696 544 R0
SYMATTR InstName R12
SYMATTR Value 200
SYMBOL nmos 3488 416 R0
WINDOW 3 -85 108 Left 2
SYMATTR Value Si2318CDS
SYMATTR InstName M2
SYMBOL nmos 3664 416 R0
WINDOW 3 -80 102 Left 2
SYMATTR Value Si2318CDS
SYMATTR InstName M3
SYMBOL voltage 2416 1056 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PWL(0 0 1m 0 1.01m {von} 2m {von} 2.01m 0)
SYMBOL voltage 2512 944 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PWL(0 0 3m 0 3.01m {von} 4m {von} 4.01m 0)
SYMBOL voltage 2624 864 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value PWL(0 0 5m 0 5.01m {von} 6m {von} 6.01m 0)
SYMBOL res 3872 544 R0
SYMATTR InstName R13
SYMATTR Value 2k
SYMBOL nmos 3840 416 R0
WINDOW 3 -80 102 Left 2
SYMATTR Value Si2318CDS
SYMATTR InstName M4
SYMBOL voltage 2720 784 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V10
SYMATTR Value PWL(0 0 7m 0 7.01m {von} 8m {von} 8.01m 0)
SYMBOL res 2048 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL cap 2080 256 R0
SYMATTR InstName C5
SYMATTR Value 1n
SYMBOL res 3168 544 R0
SYMATTR InstName R1
SYMATTR Value 0.62
SYMBOL nmos 3136 416 R0
WINDOW 3 -91 105 Left 2
SYMATTR Value Si2318CDS
SYMATTR InstName M5
SYMBOL voltage 2336 1184 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PWL(0 0 0 0 0.01m {von} 1m {von} 1.01m 0)
SYMBOL ind 2992 -96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 40n
SYMBOL res 2928 64 R0
SYMATTR InstName Rsense
SYMATTR Value 0.1
TEXT 3248 552 Left 2 ;0-1A
TEXT 3408 552 Left 2 ;0-100mA
TEXT 3760 544 Left 2 ;0-1mA
TEXT 3584 552 Left 2 ;0-10mA
TEXT 1792 552 Left 2 !.param von=10
TEXT 1794 584 Left 2 !.tran 10m
TEXT 1800 520 Left 2 !.param vcc=10 vss=-10
TEXT 3072 552 Left 2 ;0-3A
TEXT 2984 272 Left 2 ;max power = 10W
